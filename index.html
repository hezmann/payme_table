<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Me - Card Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #1a1a1a;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
            width: 95vw;
            height: 95vh;
            position: relative;
            background: 
                repeating-linear-gradient(
                    0deg,
                    rgba(0, 0, 0, 0.05) 0px,
                    transparent 1px,
                    transparent 2px,
                    rgba(0, 0, 0, 0.05) 3px
                ),
                repeating-linear-gradient(
                    90deg,
                    rgba(0, 0, 0, 0.05) 0px,
                    transparent 1px,
                    transparent 2px,
                    rgba(0, 0, 0, 0.05) 3px
                ),
                radial-gradient(ellipse at center, #0d7d3f 0%, #0a6633 50%, #085528 100%);
            border-radius: 20px;
            border: 8px solid;
            border-image: linear-gradient(135deg, #00ff00 0%, #00cc00 25%, #009900 50%, #00cc00 75%, #00ff00 100%) 1;
            box-shadow: 
                0 0 50px rgba(0, 0, 0, 0.8), 
                inset 0 0 150px rgba(0, 0, 0, 0.3),
                inset 0 0 50px rgba(0, 80, 40, 0.3),
                0 0 30px rgba(0, 255, 0, 0.3);
        }

        .player-seat {
            position: absolute;
            width: 180px;
            height: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.3s ease;
        }

        .player-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 3px solid #ffd700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            margin-bottom: 8px;
        }

        .player-name {
            color: #ffd700;
            font-size: 14px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 4px;
        }

        .player-score {
            color: #fff;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.5);
            padding: 3px 10px;
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .player-cards {
            display: flex;
            gap: -20px;
            margin-top: 5px;
            position: relative;
            height: 100px;
        }

        .card {
            width: 70px;
            height: 100px;
            border-radius: 8px;
            position: absolute;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform-origin: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .card.face-down {
            background: 
                linear-gradient(135deg, #c41e3a 0%, #8b1a2e 50%, #c41e3a 100%);
            border: 3px solid #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .card.face-down::before {
            content: '';
            width: 90%;
            height: 92%;
            border: 3px solid #d4af37;
            border-radius: 6px;
            position: absolute;
            box-shadow: 
                inset 0 0 10px rgba(0, 0, 0, 0.3),
                0 0 5px rgba(212, 175, 55, 0.5);
        }

        .card.face-down::after {
            content: '';
            position: absolute;
            width: 75%;
            height: 80%;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 8px,
                    rgba(212, 175, 55, 0.15) 8px,
                    rgba(212, 175, 55, 0.15) 16px
                ),
                repeating-linear-gradient(
                    -45deg,
                    transparent,
                    transparent 8px,
                    rgba(212, 175, 55, 0.15) 8px,
                    rgba(212, 175, 55, 0.15) 16px
                );
            border-radius: 4px;
        }

        .card.face-up {
            background: 
                linear-gradient(to bottom, #ffffff 0%, #f8f8f8 100%);
            border: 2px solid #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 8px 6px;
            font-weight: bold;
            box-shadow: 
                0 3px 6px rgba(0, 0, 0, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.9),
                inset 0 1px 2px rgba(255, 255, 255, 0.5);
            position: relative;
        }

        .card.face-up::before {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            right: 4px;
            bottom: 4px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            border-radius: 4px;
            pointer-events: none;
        }

        .card-value {
            font-size: 20px;
            line-height: 1;
            font-weight: 900;
            font-family: 'Arial Black', Arial, Helvetica, sans-serif;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }

        /* Position card value at top left corner */
        .card-value-top {
            align-self: flex-start;
        }

        /* Position card value at bottom right corner, rotated 180deg for traditional playing card style */
        .card-value-bottom {
            align-self: flex-end;
            transform: rotate(180deg);
        }

        .card-suit {
            font-size: 40px;
            line-height: 1;
            filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.15));
        }

        .card.hearts .card-value,
        .card.hearts .card-suit,
        .card.diamonds .card-value,
        .card.diamonds .card-suit {
            color: #e2001a;
        }

        .card.clubs .card-value,
        .card.clubs .card-suit,
        .card.spades .card-value,
        .card.spades .card-suit {
            color: #000000;
        }

        /* Center deck area */
        .center-area {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .deck {
            width: 80px;
            height: 115px;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .deck:hover {
            transform: scale(1.05);
        }

        .deck-card {
            width: 80px;
            height: 115px;
            background: 
                linear-gradient(135deg, #c41e3a 0%, #8b1a2e 50%, #c41e3a 100%);
            border: 3px solid #1a1a1a;
            border-radius: 10px;
            position: absolute;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
        }

        .deck-card::before {
            /* Inner border effect for enhanced visual depth on deck cards */
            content: '';
            position: absolute;
            width: 85%;
            height: 88%;
            border: 3px solid #d4af37;
            border-radius: 6px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 
                inset 0 0 10px rgba(0, 0, 0, 0.3),
                0 0 5px rgba(212, 175, 55, 0.5);
        }

        .deck-card:nth-child(1) { top: 0; left: 0; }
        .deck-card:nth-child(2) { top: -2px; left: 2px; }
        .deck-card:nth-child(3) { top: -4px; left: 4px; }
        .deck-card:nth-child(4) { top: -6px; left: 6px; }
        .deck-card:nth-child(5) { top: -8px; left: 8px; }

        .game-title {
            color: #ffd700;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            margin-bottom: 10px;
        }

        .deal-button {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            color: #333;
            margin-top: 10px;
        }

        .deal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .deal-button:active {
            transform: translateY(0);
        }

        .deal-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Player position presets */
        .player-seat.position-0 {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .player-seat.position-1 {
            top: 25%;
            left: 5%;
        }

        .player-seat.position-2 {
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
        }

        .player-seat.position-3 {
            top: 25%;
            right: 5%;
        }

        .player-seat.position-4 {
            bottom: 30%;
            right: 5%;
        }

        .player-seat.position-5 {
            bottom: 30%;
            left: 5%;
        }

        /* Card animation */
        @keyframes dealCard {
            0% {
                opacity: 0;
                transform: translate(0, 0) scale(0.5) rotate(0deg);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                transform: translate(var(--target-x), var(--target-y)) scale(1) rotate(var(--target-rotate));
            }
        }

        .card.dealing {
            animation: dealCard 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        /* Player count selector */
        .setup-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            z-index: 1000;
        }

        .setup-screen.hidden {
            display: none;
        }

        .setup-title {
            color: #ffd700;
            font-size: 32px;
            margin-bottom: 30px;
        }

        .player-count-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .player-count-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: 2px solid #ffd700;
            padding: 20px 30px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .player-count-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }
    </style>
</head>
<body>
    <div class="setup-screen" id="setupScreen">
        <div class="setup-title">Pay Me</div>
        <p style="color: #fff; margin-bottom: 20px;">Select number of players:</p>
        <div class="player-count-buttons">
            <button class="player-count-btn" onclick="startGame(3)">3 Players</button>
            <button class="player-count-btn" onclick="startGame(4)">4 Players</button>
            <button class="player-count-btn" onclick="startGame(5)">5 Players</button>
            <button class="player-count-btn" onclick="startGame(6)">6 Players</button>
        </div>
    </div>

    <div class="game-container">
        <div id="playersContainer"></div>
        
        <div class="center-area">
            <div class="game-title">Pay Me</div>
            <div class="deck" id="deck">
                <div class="deck-card"></div>
                <div class="deck-card"></div>
                <div class="deck-card"></div>
                <div class="deck-card"></div>
                <div class="deck-card"></div>
            </div>
            <button class="deal-button" id="dealButton" onclick="dealCards()">Deal Cards</button>
        </div>
    </div>

    <script>
        const suits = ['♠', '♥', '♦', '♣'];
        const suitNames = ['spades', 'hearts', 'diamonds', 'clubs'];
        const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        
        let playerCount = 0;
        let players = [];
        let dealingInProgress = false;

        function startGame(count) {
            playerCount = count;
            document.getElementById('setupScreen').classList.add('hidden');
            initializePlayers();
        }

        function initializePlayers() {
            const container = document.getElementById('playersContainer');
            container.innerHTML = '';
            players = [];

            // Position 0 is always the human player (bottom)
            const humanPlayer = createPlayer(0, 'You', true);
            players.push(humanPlayer);
            container.appendChild(humanPlayer);

            // Create other players based on count
            const positions = getPlayerPositions(playerCount);
            for (let i = 1; i < playerCount; i++) {
                const player = createPlayer(positions[i], `Player ${i + 1}`, false);
                players.push(player);
                container.appendChild(player);
            }
        }

        function getPlayerPositions(count) {
            // Returns array of position indices for players
            const positionMaps = {
                3: [0, 1, 3],        // Human bottom, 2 on sides
                4: [0, 1, 2, 3],     // Human bottom, 3 around top
                5: [0, 1, 2, 3, 4],  // Human bottom, 4 around
                6: [0, 1, 2, 3, 4, 5] // Human bottom, 5 around
            };
            return positionMaps[count] || positionMaps[3];
        }

        function createPlayer(position, name, isHuman) {
            const playerDiv = document.createElement('div');
            playerDiv.className = `player-seat position-${position}`;
            playerDiv.dataset.position = position;
            playerDiv.dataset.isHuman = isHuman;
            
            const avatar = document.createElement('div');
            avatar.className = 'player-avatar';
            avatar.textContent = name.charAt(0).toUpperCase();
            
            const nameDiv = document.createElement('div');
            nameDiv.className = 'player-name';
            nameDiv.textContent = name;
            
            const scoreDiv = document.createElement('div');
            scoreDiv.className = 'player-score';
            scoreDiv.textContent = 'Score: 0';
            
            const cardsDiv = document.createElement('div');
            cardsDiv.className = 'player-cards';
            
            playerDiv.appendChild(avatar);
            playerDiv.appendChild(nameDiv);
            playerDiv.appendChild(scoreDiv);
            playerDiv.appendChild(cardsDiv);
            
            return playerDiv;
        }

        function createCard(isHuman, cardIndex) {
            const card = document.createElement('div');
            card.className = 'card';
            
            if (isHuman) {
                // Random card for human player (face-up)
                const randomSuitIndex = Math.floor(Math.random() * suits.length);
                const randomValue = values[Math.floor(Math.random() * values.length)];
                
                card.classList.add('face-up', suitNames[randomSuitIndex]);
                
                const topValue = document.createElement('div');
                topValue.className = 'card-value card-value-top';
                topValue.textContent = randomValue;
                
                const suitDiv = document.createElement('div');
                suitDiv.className = 'card-suit';
                suitDiv.textContent = suits[randomSuitIndex];
                
                const bottomValue = document.createElement('div');
                bottomValue.className = 'card-value card-value-bottom';
                bottomValue.textContent = randomValue;
                
                card.appendChild(topValue);
                card.appendChild(suitDiv);
                card.appendChild(bottomValue);
            } else {
                // Face-down card for other players
                card.classList.add('face-down');
            }
            
            return card;
        }

        async function dealCards() {
            if (dealingInProgress) return;
            
            dealingInProgress = true;
            const dealButton = document.getElementById('dealButton');
            dealButton.disabled = true;
            
            // Clear existing cards
            players.forEach(player => {
                const cardsDiv = player.querySelector('.player-cards');
                cardsDiv.innerHTML = '';
            });

            // Deal 3 cards to each player
            for (let cardNum = 0; cardNum < 3; cardNum++) {
                for (let playerIndex = 0; playerIndex < players.length; playerIndex++) {
                    await dealCardToPlayer(playerIndex, cardNum);
                    await sleep(150); // Delay between each card
                }
            }
            
            dealingInProgress = false;
            dealButton.disabled = false;
        }

        async function dealCardToPlayer(playerIndex, cardIndex) {
            const player = players[playerIndex];
            const cardsDiv = player.querySelector('.player-cards');
            const isHuman = player.dataset.isHuman === 'true';
            
            const card = createCard(isHuman, cardIndex);
            
            // Get deck position
            const deck = document.getElementById('deck');
            const deckRect = deck.getBoundingClientRect();
            const playerRect = player.getBoundingClientRect();
            
            // Calculate relative position
            const deltaX = playerRect.left - deckRect.left + (cardIndex * 25);
            const deltaY = playerRect.top - deckRect.top + 80;
            
            // Position card at deck initially
            card.style.position = 'fixed';
            card.style.left = deckRect.left + 'px';
            card.style.top = deckRect.top + 'px';
            card.style.zIndex = 100 + playerIndex * 10 + cardIndex;
            
            document.body.appendChild(card);
            
            // Trigger animation
            await sleep(10);
            card.classList.add('dealing');
            card.style.setProperty('--target-x', deltaX + 'px');
            card.style.setProperty('--target-y', deltaY + 'px');
            card.style.setProperty('--target-rotate', `${(cardIndex - 1) * 5}deg`);
            card.style.left = (deckRect.left + deltaX) + 'px';
            card.style.top = (deckRect.top + deltaY) + 'px';
            card.style.transform = `rotate(${(cardIndex - 1) * 5}deg)`;
            
            // Wait for animation to complete
            await sleep(800);
            
            // Remove from body first
            if (card.parentNode === document.body) {
                document.body.removeChild(card);
            }
            
            // Move card to player's hand
            card.style.position = 'relative';
            card.style.left = (cardIndex * 25) + 'px';
            card.style.top = '0';
            card.classList.remove('dealing');
            
            cardsDiv.appendChild(card);
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Initialize on load
        window.addEventListener('load', () => {
            console.log('Pay Me card game loaded!');
        });
    </script>
</body>
</html>
